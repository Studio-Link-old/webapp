{% extends "base.html" %}
{% block body_container %}

<h1>Peers</h1>

<p><a href="{{ url_for('peers.add') }}" class="btn btn-success"><i class="icon-plus-sign icon-white"></i> New Peer</a></p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Name</th>
      <th>Host</th>
      <th>Status</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for peer in peers %}
    <tr>
        <td>{{ peer.name }}</td>
        <td>{{ peer.host }}</td>
        <td>
            {% if peer.status == 0 %}
            <span class="badge badge-warning">
                <abbr title="The Peer has not accept your request">Pending</abbr>
            </span>
            {% elif peer.status == 1 %}
            <span class="badge badge-success">Online</span>
            {% elif peer.status == 2 %}
            <span class="badge badge-inverse">Offline</span>
            {% elif peer.status == 3 %}
            <span class="badge badge-important">Busy</span>
            {% elif peer.status == 4 %}
            <span class="badge badge-info">Invite</span>
            {% endif %}
        </td>
        <td>
            <p>
            {% if peer.status == 1 %}
            <a href="{{ url_for('peers.call') }}"class="btn btn-small btn-primary"><i class="icon-bell icon-white"></i> Call</a>
            {% elif peer.status == 4 %}
            <a href="/peers/accept/{{ peer.id }}"class="btn btn-small btn-success"><i class="icon-ok-sign  icon-white"></i> Accept Invite</a>
            {% endif %}
            <a href="/peers/delete/{{ peer.id }}" class="btn btn-small btn-danger delete-button"><i class="icon-remove-sign icon-white"></i> Delete</a>
            </p>
        </td>
    </tr>
    {% endfor %}
  </tbody>
 </table>

<script>
 $(document).ready(function() {
     $('.delete-button').click(function() {
         var answer = confirm("Are you sure you want delete this item?");
         if (answer) {
             return true;
         } else {
             return false;
         }
     });
 });
</script>
{% endblock %}
